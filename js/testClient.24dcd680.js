(function(){"use strict";var t={2629:function(t,e,s){s.d(e,{db:function(){return z}});var i=s(9242),n=s(3396),r=s(7139);const a=t=>((0,n.dD)("data-v-168e42fb"),t=t(),(0,n.Cn)(),t),o=a((()=>(0,n._)("div",{class:"banner"},[(0,n._)("p",{class:"title m-0"},"Тест Клиента")],-1))),l={class:"box"},u={class:"test_form"},c={key:0,class:"alert-danger p-2 mt-2 position-relative",style:{background:"rgba(189,203,243, 0.5)",color:"#111111"}},d=a((()=>(0,n._)("h1",{class:"title mt-4",style:{color:"#C381D9"}},"Тестирование завершено",-1))),f=a((()=>(0,n._)("p",{class:"test_form--desc"},"Можете закрыть страницу, через неделю после вашей первой встречи мы направим вам вторую часть анкеты на почту, чтобы вы оставили свою обратную связь о совместной работе. ",-1))),h=a((()=>(0,n._)("p",{class:"test_form--desc"},"Нам необходимо получить входные данные для тестирования методики.",-1))),p=a((()=>(0,n._)("p",{class:"test_form--desc"},"Мы гарантируем, что собранные нами данные будут использованы исключительно для исследовательских целей и не будут переданы третьим лицам.",-1))),m={key:3,class:"test_form--desc"},v={key:4,class:"test_form--desc"},g={key:5,class:"test_form--desc"},w={key:6,class:"preloader p-5"},b={class:"d-flex gap-3 mt-4"},y=(0,n.Uk)("Назад "),k=(0,n.Uk)("Далее "),T=(0,n.Uk)("Отправить ");function _(t,e,s,a,_,q){const D=(0,n.up)("Preloader"),C=(0,n.up)("Questions"),x=(0,n.up)("e-button"),O=(0,n.up)("DefaultLayout");return(0,n.wg)(),(0,n.j4)(O,null,{default:(0,n.w5)((()=>[o,(0,n._)("div",l,[(0,n._)("div",{class:(0,r.C_)(["container_box",0===t.activeTest?"footer-wrap":""])},[(0,n._)("div",u,[t.error?((0,n.wg)(),(0,n.iD)("div",c,(0,r.zw)(t.error),1)):(0,n.kq)("",!0),0===t.activeTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[d,f],64)):(0,n.kq)("",!0),1===t.activeTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:2},[h,p],64)):(0,n.kq)("",!0),2===t.activeTest?((0,n.wg)(),(0,n.iD)("p",m,"Ниже будут представлены вопросы, и вам нужно будет выбрать наиболее подходящий для вас ответ.")):(0,n.kq)("",!0),3===t.activeTest?((0,n.wg)(),(0,n.iD)("p",v,"В данном разделе вам необходимо выбрать один из приведенных вариантов ответа, наиболее точно описывающий вашу позицию")):(0,n.kq)("",!0),4===t.activeTest?((0,n.wg)(),(0,n.iD)("p",g,"Тестирование на темперамент и социотип")):(0,n.kq)("",!0),0===t.questions.length?((0,n.wg)(),(0,n.iD)("div",w,[(0,n.Wm)(D)])):(0,n.kq)("",!0),(0,n._)("form",{type:"submit",class:"test_form--form-box",onSubmit:e[1]||(e[1]=(0,i.iM)((()=>{}),["prevent"])),onClick:e[2]||(e[2]=(...t)=>q.startTimer&&q.startTimer(...t))},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.questions,((e,s)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{key:s,class:"first_stage p-0",style:(0,r.j5)({visibility:t.activeTest===e.page?"visible":"hidden",height:t.activeTest===e.page?"auto":0})},[(0,n.Wm)(C,{question:e,onAnswerSet:q.updateAnswers,"is-valid":t.startValidation},null,8,["question","onAnswerSet","is-valid"])],4)),[[i.F8,t.activeTest===e.page]]))),128)),(0,n._)("div",b,[t.activeTest>1?((0,n.wg)(),(0,n.j4)(x,{key:0,onClick:q.prevStage,class:"mb-3",data:{rounded:!0},styleConfig:t.buttons.styleDarkButton},{default:(0,n.w5)((()=>[y])),_:1},8,["onClick","styleConfig"])):(0,n.kq)("",!0),0<t.activeTest&&t.activeTest<4?((0,n.wg)(),(0,n.j4)(x,{key:1,type:"submit",onClick:q.nextStage,class:"mb-3",data:{rounded:!0},styleConfig:t.buttons.styleDarkButton},{default:(0,n.w5)((()=>[k])),_:1},8,["onClick","styleConfig"])):(0,n.kq)("",!0),4===t.activeTest?((0,n.wg)(),(0,n.j4)(x,{key:2,type:"submit",onClick:e[0]||(e[0]=t=>q.setData(!1)),class:"mb-3",data:{rounded:!0},styleConfig:t.buttons.styleDarkButton},{default:(0,n.w5)((()=>[T])),_:1},8,["styleConfig"])):(0,n.kq)("",!0)])],32)])],2)])])),_:1})}var q=s(9800),D=s(4148),C=s(6780),x=s(6820),O=s(8307),j=s(7e3),S=s(4185),F=(s(5402),s(6265)),E=s.n(F),Z={name:"TestClient",components:{DefaultLayout:D.Z,Questions:x.Z,Preloader:S.Z},computed:{firstStageValidation(){return this.requiredNumbers===this.answers.filter((t=>!0===t.required&&t.answer.length>0)).length},validationQuestion(t){return"Укажите ФИО психолога, к которому вы планируете обратиться"===t.title?this.model.fio:"Ваша почта"===t.title?this.model.email:this.model.dateOfMeet}},data:()=>({inputs:q.FU,buttons:q.ZY,model:{fio:"",email:"",dateOfMeet:""},questions:[],error:"",activeTest:1,answers:[],requiredNumbers:0,tempTimer:0,failures:[],generalFailures:[],leaveQuestion:{},isBlur:!0,startValidation:!1}),methods:{scrollToTop(){window.scrollTo(0,0)},startTimer(){0===this.tempTimer&&setInterval((()=>this.tempTimer++),1e3),this.tempTimer++},updateAnswers(t){t.time=this.tempTimer;let e=this.answers.findIndex((e=>e.question===t.question));-1===e?(this.tempTimer=0,this.answers.push(t)):this.answers[e]=t},validateEmail(){let t=this.answers.find((t=>"Ваша почта"===t.question));this.error=(0,j.u$)(t?.answer??""),this.startValidation=!0},nextStage(){this.scrollToTop(),this.validateEmail(),this.firstStageValidation?this.error.length>0||(this.startValidation=!1,this.error="",this.activeTest++):this.error="Заполните все обязательные поля"},prevStage(){this.activeTest--},getRequired(t){return t.filter((t=>!0===t.required))},setPages(t){t.forEach((t=>{"questions-cllient"===t.id&&(this.questions=t.data().questions)})),this.requiredNumbers=this.getRequired(this.questions).length},async sentEmail(){let t=this.answers.find((t=>"Ваша почта"===t.question));if(t){if(""!==(0,j.u$)(t.answer))return;await E().post("http://sputnik.tomtit-tomsk.ru/api/core/Notification/create",{attributes:{email:t.answer}})}},async setData(t){if(!t&&(this.validateEmail(),this.error.length>0))return;let e=t?"leave-answers":"client-answers";const s=(0,O.JU)(z,"answers",e);await(0,O.r7)(s,{questions:(0,O.vr)({user:[...this.answers]})}),t||(this.activeTest=0,this.scrollToTop(),await this.sentEmail())},getData(){C.Z.firestore().collection("questions").get().then((t=>{this.setPages(t)}))},setDataFailures(t){let e=this.failures.findIndex((e=>e.title===t.title));-1===e?(t.failuresCounter=0,this.setFailures(t)):(t.failuresCounter=this.failures[e].failuresCounter+1,this.setFailures(t))},getFailures(t){t.forEach((t=>{"client-failures"===t.id&&(this.failures=t.data().failures)}))},getDataFailures(){C.Z.firestore().collection("statistics").get().then((t=>{this.getFailures(t)}))},setFailures(t){let e=Object.assign({},t);e.failuresCounter--;const s=(0,O.JU)(z,"statistics","client-failures"),i=(0,O.JU)(z,"statistics","general-failures");e.failuresCounter>=0&&((0,O.r7)(s,{failures:(0,O.Ab)(e)}),(0,O.r7)(i,{failures:(0,O.Ab)(e)})),(0,O.r7)(s,{failures:(0,O.vr)(t)}),(0,O.r7)(i,{failures:(0,O.vr)(t)}),this.failures=[],this.generalFailures=[],this.getDataFailures()},leaveCounterIncrease(){let t;this.answers.length>0?(t=this.answers[this.answers.length-1],this.leaveQuestion=this.questions[this.questions.findIndex((e=>e.title===t.question))+1]):this.leaveQuestion=this.questions[0],this.leaveQuestion&&this.setDataFailures(this.leaveQuestion),this.setData(!0),this.sentEmail()}},async mounted(){this.scrollToTop(),await this.getData(),this.getDataFailures(),document.addEventListener("mouseleave",(t=>{this.isBlur&&(this.leaveCounterIncrease(),this.isBlur=!1)}))}},I=s(89);const P=(0,I.Z)(Z,[["render",_],["__scopeId","data-v-168e42fb"]]);var B=P,Q=s(3766),A=s(4136),M=(s(7154),s(7076)),U=s(1430),N=s(6423),V=(s(1885),s(5871),s(474));const W=(0,Q.WB)(),Y={apiKey:"AIzaSyBr4RomrmBNFfYQNnkOiaQgZri8G5W_4vA",authDomain:"sputnik-mconnection-test.firebaseapp.com",projectId:"sputnik-mconnection-test",storageBucket:"sputnik-mconnection-test.appspot.com",messagingSenderId:"1037983478798",appId:"1:1037983478798:web:ab90add58a832fca90385f",measurementId:"G-02146NF8WE"},H=C.Z.initializeApp(Y),z=((0,V.IH)(H),H.firestore());H.auth();(0,i.ri)(B).use(U.ZP,{}).use(A.Z).use(N.Z,E()).use(W).use(U.ZP,{screens:{tablet:"576px",laptop:"992px",desktop:"1200px"}}).use(M.ZP,{teleportTarget:"#modals",modalComponent:"Modal"}).mount("#app")}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,i,n,r){if(!i){var a=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],r=t[c][2];for(var o=!0,l=0;l<i.length;l++)(!1&r||a>=r)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(o=!1,r<a&&(a=r));if(o){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,n,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.j=22}(),function(){s.p="/"}(),function(){var t={22:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,r,a=i[0],o=i[1],l=i[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var c=l(s)}for(e&&e(i);u<a.length;u++)r=a[u],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(c)},i=self["webpackChunksputnik_mconnection_test"]=self["webpackChunksputnik_mconnection_test"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998,64],(function(){return s(2629)}));i=s.O(i)})();
//# sourceMappingURL=testClient.24dcd680.js.map