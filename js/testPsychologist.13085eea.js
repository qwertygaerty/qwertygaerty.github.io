(function(){"use strict";var e={7867:function(e,t,s){s.d(t,{db:function(){return H}});var i=s(9242),r=s(3396),n=s(7139);const a=e=>((0,r.dD)("data-v-2e4a5749"),e=e(),(0,r.Cn)(),e),o=a((()=>(0,r._)("div",{class:"banner"},[(0,r._)("p",{class:"title m-0"},"Тест Психолога")],-1))),u={class:"box"},l={class:"test_form"},c={key:0,class:"alert-danger p-2 mt-2 position-relative",style:{background:"rgba(189,203,243, 0.5)",color:"#111111"}},d=a((()=>(0,r._)("h1",{class:"title mt-4",style:{color:"#C381D9"}},"Тестирование завершено",-1))),f=a((()=>(0,r._)("p",{class:"test_form--desc"},"Можете закрыть страницу, через неделю после вашей первой встречи мы направим вам вторую часть анкеты на почту, чтобы вы оставили свою обратную связь о совместной работе. ",-1))),h=a((()=>(0,r._)("p",{class:"test_form--desc"},"Нам необходимо получить входные данные для тестирования методики.",-1))),p=a((()=>(0,r._)("p",{class:"test_form--desc"},"Мы гарантируем, что собранные нами данные будут использованы исключительно для исследовательских целей и не будут переданы третьим лицам.",-1))),g={key:3,class:"test_form--desc"},m={key:4,class:"test_form--desc"},v={key:5,class:"test_form--desc"},q={key:6,class:"preloader p-5"},y={class:"d-flex gap-3 mt-4"},w=(0,r.Uk)("Назад "),b=(0,r.Uk)("Далее "),k=(0,r.Uk)("Отправить ");function T(e,t,s,a,T,_){const D=(0,r.up)("Preloader"),C=(0,r.up)("Questions"),R=(0,r.up)("e-button"),x=(0,r.up)("DefaultLayout");return(0,r.wg)(),(0,r.j4)(x,null,{default:(0,r.w5)((()=>[o,(0,r._)("div",u,[(0,r._)("div",{class:(0,n.C_)(["container_box",0===e.activeTest?"footer-wrap":""])},[(0,r._)("div",l,[e.error?((0,r.wg)(),(0,r.iD)("div",c,(0,n.zw)(e.error),1)):(0,r.kq)("",!0),0===e.activeTest?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[d,f],64)):(0,r.kq)("",!0),1===e.activeTest?((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[h,p],64)):(0,r.kq)("",!0),2===e.activeTest?((0,r.wg)(),(0,r.iD)("p",g,"Ниже будут представлены вопросы, и вам нужно будет выбрать наиболее подходящий для вас ответ.")):(0,r.kq)("",!0),3===e.activeTest?((0,r.wg)(),(0,r.iD)("p",m,"В данном разделе вам необходимо выбрать один из приведенных вариантов ответа, наиболее точно описывающий вашу позицию")):(0,r.kq)("",!0),4===e.activeTest?((0,r.wg)(),(0,r.iD)("p",v,"Тестирование на темперамент и социотип")):(0,r.kq)("",!0),0===e.questions.length?((0,r.wg)(),(0,r.iD)("div",q,[(0,r.Wm)(D)])):(0,r.kq)("",!0),(0,r._)("form",{type:"submit",class:"test_form--form-box",onSubmit:t[1]||(t[1]=(0,i.iM)((()=>{}),["prevent"])),onClick:t[2]||(t[2]=(...e)=>_.startTimer&&_.startTimer(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.questions,((t,s)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:s,class:"first_stage p-0",style:(0,n.j5)({visibility:e.activeTest===t.page?"visible":"hidden",height:e.activeTest===t.page?"auto":0})},[(0,r.Wm)(C,{question:t,onAnswerSet:_.updateAnswers,"is-valid":e.startValidation},null,8,["question","onAnswerSet","is-valid"])],4)),[[i.F8,e.activeTest===t.page]]))),128)),(0,r._)("div",y,[e.activeTest>1?((0,r.wg)(),(0,r.j4)(R,{key:0,onClick:_.prevStage,class:"mb-3",data:{rounded:!0},styleConfig:e.buttons.styleDarkButton},{default:(0,r.w5)((()=>[w])),_:1},8,["onClick","styleConfig"])):(0,r.kq)("",!0),0<e.activeTest&&e.activeTest<4?((0,r.wg)(),(0,r.j4)(R,{key:1,type:"submit",onClick:_.nextStage,class:"mb-3",data:{rounded:!0},styleConfig:e.buttons.styleDarkButton},{default:(0,r.w5)((()=>[b])),_:1},8,["onClick","styleConfig"])):(0,r.kq)("",!0),4===e.activeTest?((0,r.wg)(),(0,r.j4)(R,{key:2,type:"submit",onClick:t[0]||(t[0]=e=>_.setData(!1)),class:"mb-3",data:{rounded:!0},styleConfig:e.buttons.styleDarkButton},{default:(0,r.w5)((()=>[k])),_:1},8,["styleConfig"])):(0,r.kq)("",!0)])],32)])],2)])])),_:1})}var _=s(9800),D=s(4148),C=s(6780),R=s(6820),x=s(8307),O=s(7e3),j=s(4185),S=(s(5402),{name:"TestPsychologist",components:{DefaultLayout:D.Z,Questions:R.Z,Preloader:j.Z},computed:{firstStageValidation(){return this.requiredNumbers[this.activeTest-1]<=this.answers.filter((e=>!0===e.required&&e.answer.length>0)).length},validationQuestion(e){return"Укажите ФИО психолога, к которому вы планируете обратиться"===e.title?this.model.fio:"Ваша почта"===e.title?this.model.email:this.model.dateOfMeet}},data:()=>({inputs:_.FU,buttons:_.ZY,model:{fio:"",email:"",dateOfMeet:""},questions:[],error:"",activeTest:1,answers:[],requiredNumbers:[],tempTimer:0,failures:[],generalFailures:[],leaveQuestion:{},isBlur:!0,startValidation:!1}),methods:{scrollToTop(){window.scrollTo(0,0)},startTimer(){0===this.tempTimer&&setInterval((()=>this.tempTimer++),1e3),this.tempTimer++},updateAnswers(e){e.time=this.tempTimer;let t=this.answers.findIndex((t=>t.question===e.question));-1===t?(this.tempTimer=0,this.answers.push(e)):this.answers[t]=e},validateEmailAndRequired(){let e=this.answers.find((e=>"Укажите, пожалуйста, свою электронную почту"===e.question));if(this.error=(0,O.u$)(e?.answer??""),this.startValidation=!0,!this.firstStageValidation)return this.error="Заполните все обязательные поля",void this.scrollToTop()},nextStage(){this.scrollToTop(),this.validateEmailAndRequired(),this.error.length>0||(this.startValidation=!1,this.error="",this.activeTest++)},prevStage(){this.activeTest--},getRequired(e){return e.filter((e=>!0===e.required))},setPages(e){e.forEach((e=>{"question-psychologist"===e.id&&(this.questions=e.data().questions)}));let t={firstRequired:this.getRequired(this.questions.filter((e=>1===e.page))).length,secondRequired:this.getRequired(this.questions.filter((e=>2===e.page))).length,thirdRequired:this.getRequired(this.questions.filter((e=>3===e.page))).length,fourRequired:this.getRequired(this.questions.filter((e=>4===e.page))).length};this.requiredNumbers=[t.firstRequired,t.secondRequired+t.firstRequired,t.thirdRequired+t.secondRequired+t.firstRequired,t.fourRequired+t.thirdRequired+t.secondRequired+t.firstRequired]},async setData(e){if(!e&&(this.validateEmailAndRequired(),this.error.length>0))return;let t=e?"leave-answers":"psychologist-answers";const s=(0,x.JU)(H,"answers",t);await(0,x.r7)(s,{questions:(0,x.vr)({psychologist:[...this.answers]})}),e||(this.activeTest=0,this.scrollToTop())},getData(){C.Z.firestore().collection("questions").get().then((e=>{this.setPages(e)}))},setDataFailures(e){let t=this.failures.findIndex((t=>t.title===e.title));-1===t?(e.failuresCounter=0,this.setFailures(e)):(e.failuresCounter=this.failures[t].failuresCounter+1,this.setFailures(e))},getFailures(e){e.forEach((e=>{"psychologist-failures"===e.id&&(this.failures=e.data().failures)}))},getDataFailures(){C.Z.firestore().collection("statistics").get().then((e=>{this.getFailures(e)}))},setFailures(e){let t=Object.assign({},e);t.failuresCounter--;const s=(0,x.JU)(H,"statistics","psychologist-failures"),i=(0,x.JU)(H,"statistics","general-failures");t.failuresCounter>=0&&((0,x.r7)(s,{failures:(0,x.Ab)(t)}),(0,x.r7)(i,{failures:(0,x.Ab)(t)})),(0,x.r7)(s,{failures:(0,x.vr)(e)}),(0,x.r7)(i,{failures:(0,x.vr)(e)}),this.failures=[],this.generalFailures=[],this.getDataFailures()},leaveCounterIncrease(){let e;this.answers.length>0?(e=this.answers[this.answers.length-1],this.leaveQuestion=this.questions[this.questions.findIndex((t=>t.title===e.question))+1]):this.leaveQuestion=this.questions[0],this.setDataFailures(this.leaveQuestion),this.setData(!0)}},mounted(){this.scrollToTop(),this.getData(),this.getDataFailures(),document.addEventListener("mouseleave",(e=>{this.isBlur&&(this.leaveCounterIncrease(),this.isBlur=!1)}))}}),F=s(89);const Z=(0,F.Z)(S,[["render",T],["__scopeId","data-v-2e4a5749"]]);var I=Z,P=s(3766),A=s(4136),E=(s(7154),s(7076)),B=s(6265),M=s.n(B),Q=s(1430),U=s(6423),N=(s(1885),s(5871),s(474));const V=(0,P.WB)(),W={apiKey:"AIzaSyBr4RomrmBNFfYQNnkOiaQgZri8G5W_4vA",authDomain:"sputnik-mconnection-test.firebaseapp.com",projectId:"sputnik-mconnection-test",storageBucket:"sputnik-mconnection-test.appspot.com",messagingSenderId:"1037983478798",appId:"1:1037983478798:web:ab90add58a832fca90385f",measurementId:"G-02146NF8WE"},Y=C.Z.initializeApp(W),H=((0,N.IH)(Y),Y.firestore());Y.auth();(0,i.ri)(I).use(Q.ZP,{}).use(A.Z).use(U.Z,M()).use(V).use(Q.ZP,{screens:{tablet:"576px",laptop:"992px",desktop:"1200px"}}).use(E.ZP,{teleportTarget:"#modals",modalComponent:"Modal"}).mount("#app")}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,i,r,n){if(!i){var a=1/0;for(c=0;c<e.length;c++){i=e[c][0],r=e[c][1],n=e[c][2];for(var o=!0,u=0;u<i.length;u++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[u])}))?i.splice(u--,1):(o=!1,n<a&&(a=n));if(o){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.j=611}(),function(){s.p="/"}(),function(){var e={611:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,n,a=i[0],o=i[1],u=i[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(u)var c=u(s)}for(t&&t(i);l<a.length;l++)n=a[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},i=self["webpackChunksputnik_mconnection_test"]=self["webpackChunksputnik_mconnection_test"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998,64],(function(){return s(7867)}));i=s.O(i)})();
//# sourceMappingURL=testPsychologist.13085eea.js.map