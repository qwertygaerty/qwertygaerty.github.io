(function(){"use strict";var e={8658:function(e,t,s){s.d(t,{db:function(){return J}});var i=s(9242),r=s(3396),n=s(7139);const a=e=>((0,r.dD)("data-v-68834247"),e=e(),(0,r.Cn)(),e),o=a((()=>(0,r._)("div",{class:"banner"},[(0,r._)("p",{class:"title m-0"},"Второй этап")],-1))),l={class:"container_box"},u={class:"test_form"},_={key:0,class:"alert-danger p-2 mt-2 position-relative",style:{background:"rgba(189,203,243, 0.5)",color:"#111111"}},c=a((()=>(0,r._)("h1",{class:"title mt-4",style:{color:"#C381D9"}},"Тестирование завершено",-1))),d=a((()=>(0,r._)("p",{class:"test_form--desc"},"Можете закрыть страницу",-1))),f=a((()=>(0,r._)("p",{class:"test_form--desc"},"Спасибо, что участвуете во втором этапе исследования.",-1))),h=a((()=>(0,r._)("p",{class:"test_form--desc"},"Эта часть наиболее важна для нас, и мы надеемся получить честные ответы на все вопросы. Мы гарантируем, что ваши результаты не будут доступны никому, кроме исследователей. ",-1))),p={key:3,class:"preloader p-5"},g={class:"d-flex gap-3 mt-4"},m=(0,r.Uk)("Назад "),v=(0,r.Uk)("Далее "),b=(0,r.Uk)("Отправить ");function w(e,t,s,a,w,y){const k=(0,r.up)("Preloader"),q=(0,r.up)("Questions"),T=(0,r.up)("e-button"),D=(0,r.up)("DefaultLayout");return(0,r.wg)(),(0,r.j4)(D,null,{default:(0,r.w5)((()=>[o,(0,r._)("div",{class:(0,n.C_)(["box",0===e.activeTest?"footer-wrap":""])},[(0,r._)("div",l,[(0,r._)("div",u,[e.error?((0,r.wg)(),(0,r.iD)("div",_,(0,n.zw)(e.error),1)):(0,r.kq)("",!0),0===e.activeTest?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[c,d],64)):(0,r.kq)("",!0),1===e.activeTest?((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[f,h],64)):(0,r.kq)("",!0),0===e.questions.length?((0,r.wg)(),(0,r.iD)("div",p,[(0,r.Wm)(k)])):(0,r.kq)("",!0),(0,r._)("form",{type:"submit",class:"test_form--form-box",onSubmit:t[1]||(t[1]=(0,i.iM)((()=>{}),["prevent"])),onClick:t[2]||(t[2]=(...e)=>y.startTimer&&y.startTimer(...e))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.questions,((t,s)=>(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",{key:s,class:"first_stage p-0",style:(0,n.j5)({visibility:e.activeTest===t.page?"visible":"hidden",height:e.activeTest===t.page?"auto":0})},[(0,r.Wm)(q,{question:t,onAnswerSet:y.updateAnswers,"is-valid":e.startValidation},null,8,["question","onAnswerSet","is-valid"])],4)),[[i.F8,e.activeTest===t.page]]))),128)),(0,r._)("div",g,[e.activeTest>1?((0,r.wg)(),(0,r.j4)(T,{key:0,onClick:y.prevStage,class:"mb-3",data:{rounded:!0},styleConfig:e.buttons.styleDarkButton},{default:(0,r.w5)((()=>[m])),_:1},8,["onClick","styleConfig"])):(0,r.kq)("",!0),0<e.activeTest&&e.activeTest<2?((0,r.wg)(),(0,r.j4)(T,{key:1,type:"submit",onClick:y.nextStage,class:"mb-3",data:{rounded:!0},styleConfig:e.buttons.styleDarkButton},{default:(0,r.w5)((()=>[v])),_:1},8,["onClick","styleConfig"])):(0,r.kq)("",!0),2===e.activeTest?((0,r.wg)(),(0,r.j4)(T,{key:2,type:"submit",onClick:t[0]||(t[0]=e=>y.setData(!1)),class:"mb-3",data:{rounded:!0},styleConfig:e.buttons.styleDarkButton},{default:(0,r.w5)((()=>[b])),_:1},8,["styleConfig"])):(0,r.kq)("",!0)])],32)])])],2)])),_:1})}var y=s(9800),k=s(4148),q=s(6780),T=s(6820),D=s(8307),C=s(7e3),O=s(4185),x=(s(5402),{name:"FeedBack",components:{DefaultLayout:k.Z,Questions:T.Z,Preloader:O.Z},computed:{firstStageValidation(){return this.requiredNumbers[this.activeTest-1]<=this.answers.filter((e=>!0===e.required&&e.answer.length>0)).length},validationQuestion(e){return"Укажите ФИО психолога, к которому вы планируете обратиться"===e.title?this.model.fio:"Ваша почта"===e.title?this.model.email:this.model.dateOfMeet}},data:()=>({inputs:y.FU,buttons:y.ZY,model:{fio:"",email:"",dateOfMeet:""},questions:[],error:"",activeTest:1,answers:[],requiredNumbers:[],tempTimer:0,failures:[],generalFailures:[],leaveQuestion:{},isBlur:!0,isLoadData:!1,startValidation:!1}),methods:{getAllData(){q.Z.firestore().collection("questions").get().then((e=>{e.forEach((e=>{console.log("____________________________________________________"),console.log("doc.id : ",e.id),console.log("doc.data() : ",JSON.stringify(e.data()))}))})),q.Z.firestore().collection("answers").get().then((e=>{e.forEach((e=>{console.log("____________________________________________________"),console.log("doc.id : ",e.id),console.log("doc.data() : ",JSON.stringify(e.data()))}))})),q.Z.firestore().collection("statistics").get().then((e=>{e.forEach((e=>{console.log("____________________________________________________"),console.log("doc.id : ",e.id),console.log("doc.data() : ",JSON.stringify(e.data()))}))}))},scrollToTop(){window.scrollTo(0,0)},startTimer(){0===this.tempTimer&&setInterval((()=>this.tempTimer++),1e3),this.tempTimer++},updateAnswers(e){e.time=this.tempTimer;let t=this.answers.findIndex((t=>t.question===e.question));-1===t?(this.tempTimer=0,this.answers.push(e)):this.answers[t]=e},validateEmailAndRequired(){let e=this.answers.find((e=>"Оставьте здесь контакт, с помощью которого мы связывались с вами"===e.question));if(this.error=(0,C.u$)(e?.answer??""),this.startValidation=!0,!this.firstStageValidation)return this.error="Заполните все обязательные поля",void this.scrollToTop()},nextStage(){this.scrollToTop(),this.validateEmailAndRequired(),this.error.length>0||(this.startValidation=!1,this.error="",this.activeTest++)},prevStage(){this.activeTest--},getRequired(e){return e.filter((e=>!0===e.required))},setPages(e){e.forEach((e=>{"feedback"===e.id&&(this.questions=e.data().questions)}));let t={firstRequired:this.getRequired(this.questions.filter((e=>1===e.page))).length,secondRequired:this.getRequired(this.questions.filter((e=>2===e.page))).length};this.requiredNumbers=[t.firstRequired,t.secondRequired+t.firstRequired]},async setData(e){if(!e&&(this.validateEmailAndRequired(),this.error.length>0))return;let t=e?"leave-answers":"feedback-answers";this.isLoadData=!0;const s=(0,D.JU)(J,"answers",t);await(0,D.r7)(s,{questions:(0,D.vr)({user:[...this.answers]})}),e||(this.activeTest=0,this.scrollToTop())},getData(){q.Z.firestore().collection("questions").get().then((e=>{this.setPages(e)}))},setDataFailures(e){let t=this.failures.findIndex((t=>t.title===e.title));-1===t?(e.failuresCounter=0,this.setFailures(e)):(e.failuresCounter=this.failures[t].failuresCounter+1,this.setFailures(e))},getFailures(e){e.forEach((e=>{"feedback-failures"===e.id&&(this.failures=e.data().failures)}))},getDataFailures(){q.Z.firestore().collection("statistics").get().then((e=>{this.getFailures(e)}))},setFailures(e){let t=Object.assign({},e);t.failuresCounter--;const s=(0,D.JU)(J,"statistics","feedback-failures"),i=(0,D.JU)(J,"statistics","general-failures");t.failuresCounter>=0&&((0,D.r7)(s,{failures:(0,D.Ab)(t)}),(0,D.r7)(i,{failures:(0,D.Ab)(t)})),(0,D.r7)(s,{failures:(0,D.vr)(e)}),(0,D.r7)(i,{failures:(0,D.vr)(e)}),this.failures=[],this.generalFailures=[],this.getDataFailures()},async leaveCounterIncrease(){let e;this.answers.length>0?(e=this.answers[this.answers.length-1],this.leaveQuestion=this.questions[this.questions.findIndex((t=>t.title===e.question))+1]):this.leaveQuestion=this.questions[0],this.leaveQuestion&&this.setDataFailures(this.leaveQuestion),await this.setData(!0)}},mounted(){this.scrollToTop(),this.getData(),this.getDataFailures(),document.addEventListener("mouseleave",(e=>{this.isBlur&&(this.leaveCounterIncrease(),this.isBlur=!1)}))}}),S=s(89);const j=(0,S.Z)(x,[["render",w],["__scopeId","data-v-68834247"]]);var F=j,Z=s(3766),E=s(4136),A=(s(7154),s(7076)),I=s(6265),P=s.n(I),R=s(1430),B=s(6423),Q=(s(1885),s(5871),s(474));const M=(0,Z.WB)(),N={apiKey:"AIzaSyBr4RomrmBNFfYQNnkOiaQgZri8G5W_4vA",authDomain:"sputnik-mconnection-test.firebaseapp.com",projectId:"sputnik-mconnection-test",storageBucket:"sputnik-mconnection-test.appspot.com",messagingSenderId:"1037983478798",appId:"1:1037983478798:web:ab90add58a832fca90385f",measurementId:"G-02146NF8WE"},U=q.Z.initializeApp(N),J=((0,Q.IH)(U),U.firestore());U.auth();(0,i.ri)(F).use(R.ZP,{}).use(E.Z).use(B.Z,P()).use(M).use(R.ZP,{screens:{tablet:"576px",laptop:"992px",desktop:"1200px"}}).use(A.ZP,{teleportTarget:"#modals",modalComponent:"Modal"}).mount("#app")}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,i,r,n){if(!i){var a=1/0;for(_=0;_<e.length;_++){i=e[_][0],r=e[_][1],n=e[_][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(o=!1,n<a&&(a=n));if(o){e.splice(_--,1);var u=r();void 0!==u&&(t=u)}}return t}n=n||0;for(var _=e.length;_>0&&e[_-1][2]>n;_--)e[_]=e[_-1];e[_]=[i,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.j=205}(),function(){s.p="/"}(),function(){var e={205:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,n,a=i[0],o=i[1],l=i[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)var _=l(s)}for(t&&t(i);u<a.length;u++)n=a[u],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(_)},i=self["webpackChunksputnik_mconnection_test"]=self["webpackChunksputnik_mconnection_test"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998,64],(function(){return s(8658)}));i=s.O(i)})();
//# sourceMappingURL=feedBack.0097fc75.js.map